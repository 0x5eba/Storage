(this.webpackJsonpvideo=this.webpackJsonpvideo||[]).push([[0],{212:function(e,t,n){e.exports=n(348)},224:function(e,t){},226:function(e,t){},227:function(e,t){},228:function(e,t){},229:function(e,t){},266:function(e,t,n){},348:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(7),l=n.n(r),i=n(102),s=n(103),c=n(117),d=n(120),u=n(143),h=n.n(u),f=n(174),m=n(104),p=n(402),w=n(400),g=n(398),v=n(405),E=n(406),y=(n(218),n(394)),F=n(399),k=n(401),b=n(393),x=n(199),C=n.n(x),S=n(146),M=n.n(S),j=n(198),O=n.n(j),P=n(397),N=n(200),T=n.n(N),A=n(203),R=n(404),I=n(392),L=n(349),Y=n(182),B=n.n(Y),U=n(19),H=n(395),J=n(396),X=(n(219),n(220),n(266),"https://b245419e.ngrok.io"),z=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).searchFilesAndFolders=function(e){a.setState({search:e.target.value},(function(){var e={owner:a.state.owner,token:a.state.token,search:a.state.search};fetch(X+"/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?a.setState({folders:e.folders,files:e.files}):console.error("Error:",e.err)})).catch((function(e){console.error("Error:",e)}))}))},a.getFoldersAndFiles=function(){var e={path:a.state.path,owner:a.state.owner,token:a.state.token};fetch(X+"/api/folder/getFolders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?a.setState({folders:e}):console.error("Error:",e.err)})).catch((function(e){console.error("Error:",e)})),fetch(X+"/api/file/getFiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?a.setState({files:e}):console.error("Error:",e.err)})).catch((function(e){console.error("Error:",e)}))},a.sha256=function(){var e=Object(f.a)(h.a.mark((function e(t){var n,a,o,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new TextEncoder("utf-8").encode(t),e.next=3,crypto.subtle.digest("SHA-256",n);case 3:return a=e.sent,o=Array.from(new Uint8Array(a)),r=o.map((function(e){return("00"+e.toString(16)).slice(-2)})).join(""),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.generate_token=function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".split(""),n=[],a=0;a<e;a++){var o=(Math.random()*(t.length-1)).toFixed(0);n[a]=t[o]}return n.join("")},a.UNSAFE_componentWillMount=function(){if(null!==window.localStorage.getItem("owner")&&null!==window.localStorage.getItem("token"))a.setState({owner:window.localStorage.getItem("owner"),token:window.localStorage.getItem("token")},(function(){a.getFoldersAndFiles()}));else{var e=a.generate_token(32);a.sha256(e).then((function(t){a.setState({owner:t,token:e},(function(){window.localStorage.setItem("owner",a.state.owner),window.localStorage.setItem("token",a.state.token),a.getFoldersAndFiles()}))})).catch((function(e){console.log(e)}))}},a.createFolder=function(){if(0!==a.state.name.length){var e={owner:a.state.owner,token:a.state.token,path:a.state.path,name:a.state.name,password:a.state.password,visibleToEveryone:a.state.visible};fetch(X+"/api/folder/createFolder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?(console.log(e),a.getFoldersAndFiles(),p.a.success("".concat(e.name," folder uploaded successfully"))):(p.a.error("Folder upload failed."),console.error("Error:",e.err)),a.setState({showModal:!1})})).catch((function(e){console.error("Error:",e)}))}else p.a.error("Insert a name please\n")},a.accessFolder=function(){var e={idFolder:a.state.id,owner:a.state.owner,token:a.state.token,path:a.state.path,name:a.state.name,password:a.state.password};fetch(X+"/api/folder/getFolder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?a.setState({showModalPasswod:!1},(function(){window.location.href="http://localhost:8000/"+a.state.id})):console.error("Error:",e.err)})).catch((function(e){console.error("Error:",e)}))},a.showInfoFile=function(e){"done"===e.file.status?(p.a.success("".concat(e.file.name," file uploaded successfully")),a.getFoldersAndFiles()):"error"===e.file.status&&p.a.error("".concat(e.file.name," file upload failed."))},a.openModal=function(){a.setState({showModal:!0,name:"",password:"",showPassword:!1},(function(){}))},a.openModalPassword=function(){a.setState({showModalPassword:!0,password:""},(function(){}))},a.closeModal=function(){a.setState({showModal:!1,showModalPasswod:!1,showModalFile:!1},(function(){}))},a.clickFolder=function(e){0===e.password.length?window.location.href="http://localhost:8000/"+e.idFolder:a.setState({id:e.idFolder,name:e.name,showModalPasswod:!0})},a.clickFile=function(e){var t={idFile:e.idFile,owner:a.state.owner,token:a.state.token};fetch(X+"/api/file/getFile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.blob()})).then((function(t){a.setState({url:URL.createObjectURL(t),name:e.name,showModalFile:!0})})).catch((function(e){console.error("Error:",e)}))},a.viewFile=function(){window.location.href=a.state.url},a.downloadFile=function(){var e=document.createElement("a");e.href=a.state.url,e.setAttribute("download",a.state.name),e.click()},a.closeMenu=function(){a.setState({mouseX:null,mouseY:null})},a.state={id:"",owner:"",token:"",path:window.location.href,name:"",password:"",visible:!1,showModal:!1,showModalPasswod:!1,showPassword:!1,folders:[],files:[],search:"",url:null,showModalFile:!1,mouseX:null,mouseY:null,isFile:!1},a.getFoldersAndFiles=a.getFoldersAndFiles.bind(Object(m.a)(a)),a}return Object(s.a)(n,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(A.a,{keepMounted:!0,open:null!==this.state.mouseY,onClose:this.closeMenu,anchorReference:"anchorPosition",anchorPosition:null!==this.state.mouseY&&null!==this.state.mouseX?{top:this.state.mouseY,left:this.state.mouseX}:void 0},!0===this.state.isFile?o.a.createElement("div",{style:{width:"250px"}},o.a.createElement(R.a,{onClick:function(){return console.log("ok")}},o.a.createElement(I.a,null,o.a.createElement(B.a,{fontSize:"small"})),o.a.createElement(L.a,{variant:"inherit",noWrap:!0},"Remove"))):o.a.createElement("div",null)),o.a.createElement(U.a,{show:this.state.showModal,onHide:this.closeModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(U.a.Header,{closeButton:!0},o.a.createElement(U.a.Title,{id:"contained-modal-title-vcenter"},"New Folder")),o.a.createElement(U.a.Body,null,o.a.createElement("div",{style:{paddingLeft:"30px",paddingRight:"30px"}},o.a.createElement("div",null,o.a.createElement(w.a,{placeholder:"Folder name",onChange:function(t){return e.setState({name:t.target.value})}})),o.a.createElement("div",null,o.a.createElement(b.a,{value:"password",control:o.a.createElement(k.a,{color:"primary",onClick:function(){return e.setState({showPassword:!e.state.showPassword})}}),label:"Password"}),!0===this.state.showPassword?o.a.createElement(w.a,{placeholder:"Password",type:"password",onChange:function(t){return e.setState({password:t.target.value})}}):null),o.a.createElement("div",null,o.a.createElement(b.a,{value:"Visible to everyone",control:o.a.createElement(k.a,{color:"primary",onClick:function(){return e.setState({visible:!e.state.visible})}}),label:"Visible to everyone"})))),o.a.createElement(U.a.Footer,null,o.a.createElement(y.a,{variant:"contained",style:{backgroundColor:"white"},onClick:this.closeModal},"Cancel"),o.a.createElement(y.a,{variant:"contained",style:{backgroundColor:"#4caf50",marginLeft:"20px",marginRight:"20px"},onClick:this.createFolder},"Create"))),o.a.createElement(U.a,{show:this.state.showModalPasswod,onHide:this.closeModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(U.a.Header,{closeButton:!0},o.a.createElement(U.a.Title,{id:"contained-modal-title-vcenter"},"Password Folder")),o.a.createElement(U.a.Body,null,o.a.createElement("div",{style:{paddingLeft:"30px",paddingRight:"30px"}},o.a.createElement(w.a,{placeholder:"Password",type:"password",onChange:function(t){return e.setState({password:t.target.value})}}))),o.a.createElement(U.a.Footer,null,o.a.createElement(y.a,{variant:"contained",style:{backgroundColor:"white"},onClick:this.closeModal},"Cancel"),o.a.createElement(y.a,{variant:"contained",style:{backgroundColor:"#4caf50",marginLeft:"20px",marginRight:"20px"},onClick:this.accessFolder},"Access"))),o.a.createElement(U.a,{show:this.state.showModalFile,onHide:this.closeModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(U.a.Header,{closeButton:!0},o.a.createElement(U.a.Title,{id:"contained-modal-title-vcenter"},"File ".concat(this.state.name))),o.a.createElement(U.a.Body,null,o.a.createElement("div",{style:{paddingLeft:"30px",paddingRight:"30px",textAlign:"center"}},o.a.createElement(y.a,{variant:"contained",style:{backgroundColor:"#ef5350"},onClick:this.viewFile},"View"),o.a.createElement(y.a,{variant:"contained",style:{backgroundColor:"#4caf50",marginLeft:"20px",marginRight:"20px"},onClick:this.downloadFile},"Download")))),o.a.createElement("div",{className:"container"},o.a.createElement("div",null,o.a.createElement(F.a,{label:"Search",type:"search",variant:"outlined",style:{margin:"20px",marginBottom:"0px",maxWidth:"600px",width:"80%",backgroundColor:"white"},onChange:this.searchFilesAndFolders})),o.a.createElement("div",{style:{margin:"20px"}},o.a.createElement(g.a,{name:"file",action:X+"/api/file/uploadFile",beforeUpload:function(e,t){for(var n=t,a=0;a<n.length;a++)if(n[a].size>16e6)return p.a.error("".concat(n[a].name," is too large, please pick a smaller file\n")),!1;return!0},data:{owner:this.state.owner,token:this.state.token,path:this.state.path},showUploadList:!1,onChange:this.showInfoFile},o.a.createElement(y.a,{variant:"contained",className:"buttons-folders",style:{textAlign:"left",justifyContent:"left",backgroundColor:"#2196f3",borderRadius:"7px",width:"auto"},startIcon:o.a.createElement(v.a,null)},"Upload File")),o.a.createElement(y.a,{variant:"contained",className:"buttons-folders",style:{textAlign:"left",justifyContent:"left",backgroundColor:"#ff9800",borderRadius:"7px",marginLeft:"20px",width:"auto"},startIcon:o.a.createElement(E.a,null),onClick:this.openModal},"Create Folder")),o.a.createElement(H.a,{style:{maxHeight:"230px",overflow:"auto",overflowY:"scroll"}},this.state.folders.map((function(t){return o.a.createElement(J.a,{className:"folders",key:t._id},o.a.createElement(y.a,{variant:"contained",className:"buttons-folders",style:{textTransform:"none",backgroundColor:"white",textAlign:"left",justifyContent:"left",borderRadius:"7px",fontSize:"17px",paddingLeft:"20px"},startIcon:0!==t.password.length?o.a.createElement(M.a,{className:"icons",style:{marginRight:"10px"}}):!0===t.visibleToEveryone?o.a.createElement(O.a,{className:"icons",style:{marginRight:"10px"}}):o.a.createElement(C.a,{className:"icons",style:{marginRight:"10px"}}),onContextMenu:function(n){n.preventDefault(),e.setState({mouseX:n.clientX-2,mouseY:n.clientY-4,id:t.idFolder,isFile:!1})},onClick:function(){return e.clickFolder(t)}},o.a.createElement(L.a,{variant:"inherit",noWrap:!0},t.name)))}))),o.a.createElement(P.a,null),o.a.createElement(H.a,{style:{overflow:"auto",overflowY:"scroll"}},this.state.files.map((function(t){return o.a.createElement(J.a,{className:"files",key:t._id},o.a.createElement(y.a,{props:t,variant:"contained",className:"buttons-files",style:{textTransform:"none",backgroundColor:"white",textAlign:"left",justifyContent:"left",fontSize:"17px",paddingLeft:"20px"},startIcon:0!==t.password.length?o.a.createElement(M.a,{className:"icons",style:{marginRight:"10px"}}):o.a.createElement(T.a,{className:"icons",style:{marginRight:"10px"}}),onContextMenu:function(n){n.preventDefault(),e.setState({mouseX:n.clientX-2,mouseY:n.clientY-4,id:t.idFile,isFile:!0})},onClick:function(){return e.clickFile(t)}},o.a.createElement(L.a,{variant:"inherit",noWrap:!0},t.name)))})))))}}]),n}(a.Component),W=n(201),_=n(58),D=function(e){Object(d.a)(n,e);var t=Object(c.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(W.a,null,o.a.createElement(_.c,null,o.a.createElement(_.a,{path:"/",component:z}))))}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},93:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=93}},[[212,1,2]]]);
//# sourceMappingURL=main.bad7fa54.chunk.js.map