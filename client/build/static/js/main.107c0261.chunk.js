(this.webpackJsonpvideo=this.webpackJsonpvideo||[]).push([[0],{180:function(e,t,a){e.exports=a(273)},188:function(e,t,a){},273:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(7),l=a.n(r),i=a(82),s=a(83),c=a(97),d=a(100),u=a(120),m=a.n(u),f=a(143),h=a(84),p=a(325),w=a(323),g=a(321),v=a(328),E=a(329),F=(a(186),a(317)),y=a(322),k=a(324),b=a(316),C=a(167),S=a.n(C),x=a(123),M=a.n(x),j=a(166),O=a.n(j),P=a(320),T=a(168),A=a.n(T),N=a(171),R=a(327),I=a(315),L=a(274),Y=a(75),z=a.n(Y),W=a(19),B=a(318),J=a(319),H=(a(187),a(188),"https://store.sebastienbiollo.com"),X=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).searchFilesAndFolders=function(e){n.setState({search:e.target.value},(function(){var e={owner:n.state.owner,token:n.state.token,search:n.state.search};fetch(H+"/api/search",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?n.setState({folders:e.folders,files:e.files}):p.a.error(e.err)})).catch((function(e){console.error("Error:",e)}))}))},n.getFoldersAndFiles=function(){if(!n.state.path.includes("folder")&&!n.state.path.includes("file")){var e={path:n.state.path,owner:n.state.owner,token:n.state.token};fetch(H+"/api/folder/getFolders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?n.setState({folders:e}):console.error("Error:",e.err)})).catch((function(e){console.error("Error:",e)})),fetch(H+"/api/file/getFiles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?n.setState({files:e}):p.a.error(e.err)})).catch((function(e){console.error("Error:",e)}))}},n.sha256=function(){var e=Object(f.a)(m.a.mark((function e(t){var a,n,o,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=new TextEncoder("utf-8").encode(t),e.next=3,crypto.subtle.digest("SHA-256",a);case 3:return n=e.sent,o=Array.from(new Uint8Array(n)),r=o.map((function(e){return("00"+e.toString(16)).slice(-2)})).join(""),e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.generate_token=function(e){for(var t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ1234567890".split(""),a=[],n=0;n<e;n++){var o=(Math.random()*(t.length-1)).toFixed(0);a[n]=t[o]}return a.join("")},n.UNSAFE_componentWillMount=function(){if(null!==window.localStorage.getItem("owner")&&null!==window.localStorage.getItem("token"))n.setState({owner:window.localStorage.getItem("owner"),token:window.localStorage.getItem("token")},(function(){n.getFoldersAndFiles()}));else{var e=n.generate_token(32);n.sha256(e).then((function(t){n.setState({owner:t,token:e},(function(){window.localStorage.setItem("owner",n.state.owner),window.localStorage.setItem("token",n.state.token),n.getFoldersAndFiles()}))})).catch((function(e){console.log(e)}))}},n.createFolder=function(){if(0!==n.state.name.length){var e={owner:n.state.owner,token:n.state.token,path:n.state.path,name:n.state.name,password:n.state.password,visibleToEveryone:n.state.visible};fetch(H+"/api/folder/createFolder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?(console.log(e),n.getFoldersAndFiles(),p.a.success("".concat(e.name," folder uploaded successfully"))):p.a.error("Folder upload failed."),n.setState({showModal:!1})})).catch((function(e){console.error("Error:",e)}))}else p.a.error("Insert a name please\n")},n.accessFolder=function(){var e={idFolder:n.state.id,owner:n.state.owner,token:n.state.token,path:n.state.path,name:n.state.name,password:n.state.password};fetch(H+"/api/folder/getFolder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?n.setState({showModalPasswod:!1},(function(){window.location.href="/"+n.state.id})):p.a.error(e.err)})).catch((function(e){console.error("Error:",e)}))},n.showInfoFile=function(e){"done"===e.file.status?(p.a.success("".concat(e.file.name," file uploaded successfully")),n.getFoldersAndFiles()):"error"===e.file.status&&p.a.error("".concat(e.file.name," file upload failed."))},n.openModal=function(){n.setState({showModal:!0,name:"",password:"",showPassword:!1},(function(){}))},n.openModalPassword=function(){n.setState({showModalPassword:!0,password:""},(function(){}))},n.closeModal=function(){n.setState({showModal:!1,showModalPasswod:!1,showModalFile:!1},(function(){}))},n.clickFolder=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];0===e.password.length?window.location.href="/"+e.idFolder:n.setState({id:e.idFolder,name:e.name,showModalPasswod:t})},n.clickFile=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a={idFile:e.idFile,owner:n.state.owner,token:n.state.token};n.setState({name:e.name,showModalFile:t,downloading:!0}),fetch(H+"/api/file/getFile",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then((function(e){return e.blob()})).then((function(e){n.setState({url:URL.createObjectURL(e)},(function(){n.setState({downloading:!1},(function(){!0===n.state.viewFileClicked?(n.setState({viewFileClicked:!1}),n.viewFile()):!0===n.state.downloadFileClicked&&(n.setState({downloadFileClicked:!1}),n.downloadFile())}))}))})).catch((function(e){console.error("Error:",e)}))},n.viewFile=function(){!1===n.state.downloading?window.location.href=n.state.url:n.setState({viewFileClicked:!0})},n.closeMenu=function(){n.setState({mouseX:null,mouseY:null})},n.downloadFile=function(){if(!1===n.state.downloading){var e=document.createElement("a");e.href=n.state.url,e.setAttribute("download",n.state.name),e.click()}else n.setState({downloadFileClicked:!0})},n.remove=function(){var e={idFolder:n.state.id,owner:n.state.owner,token:n.state.token},t="/api/folder/deleteFolder";!0===n.state.isFile&&(e={idFile:n.state.id,owner:n.state.owner,token:n.state.token},t="/api/file/deleteFile"),fetch(H+t,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){void 0===e.err?(p.a.success("".concat(!0===n.state.isFile?"File":"Folder"," deleted")),n.getFoldersAndFiles()):p.a.error(e.err)})).catch((function(e){console.error("Error:",e)}))},n.state={id:"",owner:"",token:"",path:window.location.href,name:"",password:"",visible:!1,showModal:!1,showModalPasswod:!1,showPassword:!1,folders:[],files:[],search:"",url:null,downloading:!1,showModalFile:!1,mouseX:null,mouseY:null,isFile:!1},n.getFoldersAndFiles=n.getFoldersAndFiles.bind(Object(h.a)(n)),n}return Object(s.a)(a,[{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(N.a,{keepMounted:!0,open:null!==this.state.mouseY,onClose:this.closeMenu,anchorReference:"anchorPosition",anchorPosition:null!==this.state.mouseY&&null!==this.state.mouseX?{top:this.state.mouseY,left:this.state.mouseX}:void 0},!0===this.state.isFile?o.a.createElement("div",{style:{width:"250px"}},o.a.createElement(R.a,{onClick:function(){e.remove(),e.closeMenu()}},o.a.createElement(I.a,null,o.a.createElement(z.a,{fontSize:"small"})),o.a.createElement(L.a,{variant:"inherit",noWrap:!0},"Remove")),o.a.createElement(R.a,{onClick:function(){e.downloadFile(),e.closeMenu()}},o.a.createElement(I.a,null,o.a.createElement(z.a,{fontSize:"small"})),o.a.createElement(L.a,{variant:"inherit",noWrap:!0},"Download")),o.a.createElement(R.a,{onClick:function(){e.downloadFile(),e.closeMenu()}},o.a.createElement(I.a,null,o.a.createElement(z.a,{fontSize:"small"})),o.a.createElement(L.a,{variant:"inherit",noWrap:!0},"Share file"))):o.a.createElement("div",{style:{width:"250px"}},o.a.createElement(R.a,{onClick:function(){e.remove(),e.closeMenu()}},o.a.createElement(I.a,null,o.a.createElement(z.a,{fontSize:"small"})),o.a.createElement(L.a,{variant:"inherit",noWrap:!0},"Remove")))),o.a.createElement(W.a,{show:this.state.showModal,onHide:this.closeModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(W.a.Header,{closeButton:!0},o.a.createElement(W.a.Title,{id:"contained-modal-title-vcenter"},"New Folder")),o.a.createElement(W.a.Body,null,o.a.createElement("div",{style:{paddingLeft:"30px",paddingRight:"30px"}},o.a.createElement("div",null,o.a.createElement(w.a,{placeholder:"Folder name",onChange:function(t){return e.setState({name:t.target.value})}})),o.a.createElement("div",null,o.a.createElement(b.a,{value:"password",control:o.a.createElement(k.a,{color:"primary",onClick:function(){return e.setState({showPassword:!e.state.showPassword})}}),label:"Password"}),!0===this.state.showPassword?o.a.createElement(w.a,{placeholder:"Password",type:"password",onChange:function(t){return e.setState({password:t.target.value})}}):null),o.a.createElement("div",null,o.a.createElement(b.a,{value:"Visible to everyone",control:o.a.createElement(k.a,{color:"primary",onClick:function(){return e.setState({visible:!e.state.visible})}}),label:"Visible to everyone"})))),o.a.createElement(W.a.Footer,null,o.a.createElement(F.a,{variant:"contained",style:{backgroundColor:"white"},onClick:this.closeModal},"Cancel"),o.a.createElement(F.a,{variant:"contained",style:{backgroundColor:"#4caf50",marginLeft:"20px",marginRight:"20px"},onClick:this.createFolder},"Create"))),o.a.createElement(W.a,{show:this.state.showModalPasswod,onHide:this.closeModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(W.a.Header,{closeButton:!0},o.a.createElement(W.a.Title,{id:"contained-modal-title-vcenter"},"Password Folder")),o.a.createElement(W.a.Body,null,o.a.createElement("div",{style:{paddingLeft:"30px",paddingRight:"30px"}},o.a.createElement(w.a,{placeholder:"Password",type:"password",onChange:function(t){return e.setState({password:t.target.value})}}))),o.a.createElement(W.a.Footer,null,o.a.createElement(F.a,{variant:"contained",style:{backgroundColor:"white"},onClick:this.closeModal},"Cancel"),o.a.createElement(F.a,{variant:"contained",style:{backgroundColor:"#4caf50",marginLeft:"20px",marginRight:"20px"},onClick:this.accessFolder},"Access"))),o.a.createElement(W.a,{show:this.state.showModalFile,onHide:this.closeModal,size:"md","aria-labelledby":"contained-modal-title-vcenter",centered:!0},o.a.createElement(W.a.Header,{closeButton:!0},o.a.createElement(W.a.Title,{id:"contained-modal-title-vcenter"},"File ".concat(this.state.name))),o.a.createElement(W.a.Body,null,o.a.createElement("div",{style:{paddingLeft:"30px",paddingRight:"30px",textAlign:"center"}},o.a.createElement(F.a,{variant:"contained",style:{backgroundColor:"#ef5350"},onClick:this.viewFile},"View"),o.a.createElement(F.a,{variant:"contained",style:{backgroundColor:"#4caf50",marginLeft:"20px",marginRight:"20px"},onClick:this.downloadFile},"Download")))),o.a.createElement("div",{className:"container"},o.a.createElement("div",null,o.a.createElement(y.a,{label:"Search",type:"search",variant:"outlined",style:{margin:"20px",marginBottom:"0px",maxWidth:"600px",width:"80%",backgroundColor:"white"},onChange:this.searchFilesAndFolders})),o.a.createElement("div",{style:{margin:"20px"}},o.a.createElement(g.a,{name:"file",action:H+"/api/file/uploadFile",beforeUpload:function(e,t){for(var a=t,n=0;n<a.length;n++)if(a[n].size>16e6)return p.a.error("".concat(a[n].name," is too large, please pick a smaller file\n")),!1;return!0},data:{owner:this.state.owner,token:this.state.token,path:this.state.path},showUploadList:!1,onChange:this.showInfoFile},o.a.createElement(F.a,{variant:"contained",className:"buttons-folders",style:{textAlign:"left",justifyContent:"left",backgroundColor:"#2196f3",borderRadius:"7px",width:"auto"},startIcon:o.a.createElement(v.a,null)},"Upload File")),o.a.createElement(F.a,{variant:"contained",className:"buttons-folders",style:{textAlign:"left",justifyContent:"left",backgroundColor:"#ff9800",borderRadius:"7px",marginLeft:"20px",width:"auto"},startIcon:o.a.createElement(E.a,null),onClick:this.openModal},"Create Folder")),o.a.createElement(B.a,{style:{maxHeight:"230px",overflow:"auto",overflowY:"scroll"}},this.state.folders.map((function(t){return o.a.createElement(J.a,{className:"folders",key:t._id},o.a.createElement(F.a,{variant:"contained",className:"buttons-folders",style:{textTransform:"none",backgroundColor:"white",textAlign:"left",justifyContent:"left",borderRadius:"7px",fontSize:"17px",paddingLeft:"20px"},startIcon:0!==t.password.length?o.a.createElement(M.a,{className:"icons",style:{marginRight:"10px"}}):!0===t.visibleToEveryone?o.a.createElement(O.a,{className:"icons",style:{marginRight:"10px"}}):o.a.createElement(S.a,{className:"icons",style:{marginRight:"10px"}}),onContextMenu:function(a){a.preventDefault(),e.setState({mouseX:a.clientX-2,mouseY:a.clientY-4,id:t.idFolder,isFile:!1,name:t.name})},onClick:function(){return e.clickFolder(t)}},o.a.createElement(L.a,{variant:"inherit",noWrap:!0},t.name)))}))),o.a.createElement(P.a,null),o.a.createElement(B.a,{style:{overflow:"auto",overflowY:"scroll"}},this.state.files.map((function(t){return o.a.createElement(J.a,{className:"files",key:t._id},o.a.createElement(F.a,{props:t,variant:"contained",className:"buttons-files",style:{textTransform:"none",backgroundColor:"white",textAlign:"left",justifyContent:"left",fontSize:"17px",paddingLeft:"20px"},startIcon:0!==t.password.length?o.a.createElement(M.a,{className:"icons",style:{marginRight:"10px"}}):o.a.createElement(A.a,{className:"icons",style:{marginRight:"10px"}}),onContextMenu:function(a){a.preventDefault(),e.setState({mouseX:a.clientX-2,mouseY:a.clientY-4,id:t.idFile,isFile:!0},(function(){return e.clickFile(t,!1)}))},onClick:function(){return e.clickFile(t)}},o.a.createElement(L.a,{variant:"inherit",noWrap:!0},t.name)))})))))}}]),a}(n.Component),U=a(169),D=a(45),_=function(e){Object(d.a)(a,e);var t=Object(c.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(U.a,null,o.a.createElement(D.c,null,o.a.createElement(D.a,{path:"/",component:X}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(_,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[180,1,2]]]);
//# sourceMappingURL=main.107c0261.chunk.js.map